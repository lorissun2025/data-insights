<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AIåŠ©æ‰‹ - æ™ºèƒ½æ•°æ®å¹³å°</title>
    <script src="https://cdn.jsdelivr.net/npm/vue@3.3.4/dist/vue.global.js"></script>
    <link rel="stylesheet" href="styles.css">
    <style>
        .chat-container { height: 500px; display: flex; flex-direction: column; }
        .chat-messages { flex: 1; overflow-y: auto; padding: 20px; background: rgba(15, 23, 42, 0.6); border-radius: 8px; margin-bottom: 16px; }
        .message { margin-bottom: 16px; padding: 12px 16px; border-radius: 8px; max-width: 80%; }
        .message.user { background: rgba(59, 130, 246, 0.2); margin-left: auto; }
        .message.assistant { background: rgba(139, 92, 246, 0.2); }
        .input-area { display: flex; gap: 12px; }
        .chat-input { flex: 1; padding: 14px; background: rgba(30, 41, 59, 0.8); border: 1px solid rgba(99, 102, 241, 0.3); border-radius: 8px; color: #e2e8f0; }
        .send-btn { padding: 14px 32px; background: linear-gradient(135deg, #3b82f6, #8b5cf6); border: none; border-radius: 8px; color: white; cursor: pointer; }
        .send-btn:hover { transform: translateY(-2px); }
        .suggestions { display: flex; gap: 8px; margin-bottom: 16px; flex-wrap: wrap; }
        .suggestion-chip { padding: 8px 16px; background: rgba(59, 130, 246, 0.15); border: 1px solid rgba(59, 130, 246, 0.3); border-radius: 6px; color: #60a5fa; cursor: pointer; font-size: 13px; }
        .suggestion-chip:hover { background: rgba(59, 130, 246, 0.25); }
    </style>
</head>
<body>
    <div id="app">
        <nav class="navbar">
            <div class="nav-brand">DATA INSIGHTS</div>
            <div class="nav-menu">
                <a class="nav-item" href="dashboard.html">æ•°æ®åˆ†æ</a>
                <a class="nav-item active" href="assistant.html">AIåŠ©æ‰‹</a>
            </div>
            <div class="nav-user">
                <span class="user-name">{{ userName }}</span>
                <button class="logout-btn" @click="logout">é€€å‡ºç™»å½•</button>
            </div>
        </nav>

        <div class="header">
            <h1>AIæ™ºèƒ½åŠ©æ‰‹</h1>
            <p>è‡ªç„¶è¯­è¨€æŸ¥è¯¢ Â· æ™ºèƒ½åˆ†æ Â· æŠ¥å‘Šç”Ÿæˆ</p>
        </div>

        <div class="container">
            <div class="chart-card">
                <h3>ğŸ’¬ å¼€å§‹å¯¹è¯</h3>

                <div class="suggestions">
                    <div class="suggestion-chip" @click="askQuestion('æœ¬æœˆé”€å”®é¢æ˜¯å¤šå°‘?')">æœ¬æœˆé”€å”®é¢æ˜¯å¤šå°‘?</div>
                    <div class="suggestion-chip" @click="askQuestion('åˆ†æé˜¿è«è¥¿æ—çš„é”€å”®è¶‹åŠ¿')">åˆ†æé˜¿è«è¥¿æ—çš„é”€å”®è¶‹åŠ¿</div>
                    <div class="suggestion-chip" @click="askQuestion('å“ªäº›åŒ»é™¢å¢é•¿æœ€å¿«?')">å“ªäº›åŒ»é™¢å¢é•¿æœ€å¿«?</div>
                    <div class="suggestion-chip" @click="askQuestion('ç”Ÿæˆæœ¬æœˆé”€å”®æŠ¥å‘Š')">ç”Ÿæˆæœ¬æœˆé”€å”®æŠ¥å‘Š</div>
                </div>

                <div class="chat-container">
                    <div class="chat-messages" ref="messagesContainer">
                        <div v-for="(msg, index) in messages" :key="index" :class="['message', msg.role]">
                            <div style="font-weight: 600; margin-bottom: 4px; color: #f1f5f9;">{{ msg.role === 'user' ? 'ä½ ' : 'AIåŠ©æ‰‹' }}</div>
                            <div style="color: #cbd5e1;">{{ msg.content }}</div>
                        </div>
                        <div v-if="loading" class="message assistant">
                            <div style="color: #94a3b8;">æ­£åœ¨æ€è€ƒä¸­...</div>
                        </div>
                    </div>

                    <div class="input-area">
                        <input type="text" class="chat-input" v-model="userInput" @keyup.enter="sendMessage" placeholder="è¾“å…¥æ‚¨çš„é—®é¢˜...">
                        <button class="send-btn" @click="sendMessage" :disabled="!userInput.trim()">å‘é€</button>
                    </div>
                </div>

                <div style="margin-top: 24px; padding: 16px; background: rgba(15, 23, 42, 0.6); border-radius: 8px;">
                    <h4 style="color: #f1f5f9; margin-bottom: 12px;">ğŸ“Š æ”¯æŒçš„æŸ¥è¯¢ç±»å‹</h4>
                    <ul style="color: #94a3b8; line-height: 1.8;">
                        <li>ğŸ’° é”€å”®æ•°æ®æŸ¥è¯¢ (é”€å”®é¢ã€é”€å”®é‡ã€å¢é•¿ç‡)</li>
                        <li>ğŸ“ˆ è¶‹åŠ¿åˆ†æ (äº§å“ã€åŒºåŸŸã€æ—¶é—´ç»´åº¦)</li>
                        <li>ğŸ¥ å®¢æˆ·åˆ†æ (åŒ»é™¢ã€ç§‘å®¤ã€åŒ»ç”Ÿ)</li>
                        <li>ğŸ¥Š ç«å“å¯¹æ¯” (å¸‚åœºä»½é¢ã€ä»·æ ¼ã€å¢é•¿ç‡)</li>
                        <li>ğŸ“‹ æŠ¥å‘Šç”Ÿæˆ (è‡ªåŠ¨ç”Ÿæˆåˆ†ææŠ¥å‘Š)</li>
                        <li>ğŸ”® é¢„æµ‹åˆ†æ (é”€å”®é¢„æµ‹ã€å¼‚å¸¸æ£€æµ‹)</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>

    <script>
        const { createApp } = Vue;
        createApp({
            data() {
                return {
                    loading: false,
                    userName: 'ç®¡ç†å‘˜',
                    token: localStorage.getItem('token'),
                    userInput: '',
                    messages: [
                        {role: 'assistant', content: 'æ‚¨å¥½!æˆ‘æ˜¯AIæ™ºèƒ½åŠ©æ‰‹,å¯ä»¥å¸®æ‚¨æŸ¥è¯¢å’Œåˆ†ææ•°æ®ã€‚æ‚¨å¯ä»¥é—®æˆ‘å…³äºé”€å”®ã€è¶‹åŠ¿ã€ç«å“ç­‰é—®é¢˜,æˆ–è€…è®©æˆ‘ç”Ÿæˆåˆ†ææŠ¥å‘Šã€‚'}
                    ]
                };
            },
            mounted() {
                if (!this.token) { window.location.href = 'login.html'; }
            },
            methods: {
                logout() { localStorage.removeItem('token'); window.location.href = 'login.html'; },
                askQuestion(question) {
                    this.userInput = question;
                    this.sendMessage();
                },
                sendMessage() {
                    if (!this.userInput.trim()) return;

                    this.messages.push({role: 'user', content: this.userInput});
                    const question = this.userInput;
                    this.userInput = '';
                    this.loading = true;

                    setTimeout(() => {
                        this.loading = false;
                        this.messages.push({role: 'assistant', content: this.getResponse(question)});
                        this.$nextTick(() => {
                            const container = this.$refs.messagesContainer;
                            container.scrollTop = container.scrollHeight;
                        });
                    }, 1000);
                },
                getResponse(question) {
                    if (question.includes('é”€å”®') || question.includes('è¶‹åŠ¿')) {
                        return 'æ ¹æ®æœ€æ–°æ•°æ®,æœ¬æœˆé”€å”®é¢ä¸º14,800ä¸‡å…ƒ,ç¯æ¯”å¢é•¿4.2%ã€‚ä¸»è¦å¢é•¿åŠ¨åŠ›æ¥è‡ªé˜¿è«è¥¿æ—èƒ¶å›Šå’Œå¸ƒæ´›èŠ¬ç¼“é‡Šèƒ¶å›Šã€‚åä¸œå’Œåå—åœ°åŒºè´¡çŒ®æœ€å¤§ã€‚å»ºè®®é‡ç‚¹å…³æ³¨æ­å·å’Œæ·±åœ³å¸‚åœºã€‚';
                    } else if (question.includes('åŒ»é™¢') || question.includes('å®¢æˆ·')) {
                        return 'å¢é•¿æœ€å¿«çš„åŒ»é™¢æ˜¯:\n1. æ­å·å¸‚ç¬¬ä¸€åŒ»é™¢ (+28.5%)\n2. æ·±åœ³å¸‚äººæ°‘åŒ»é™¢ (+32.1%)\n3. æˆéƒ½å¸‚åè¥¿åŒ»é™¢ (+24.3%)\n\nå»ºè®®å°†èµ„æºå€¾æ–œåˆ°è¿™äº›é«˜å¢é•¿æ½œåŠ›åŒ»é™¢ã€‚';
                    } else if (question.includes('æŠ¥å‘Š') || question.includes('ç”Ÿæˆ')) {
                        return 'âœ… æŠ¥å‘Šå·²ç”Ÿæˆ!\n\nğŸ“Š æœ¬æœˆé”€å”®åˆ†ææŠ¥å‘Š:\n- æ€»é”€å”®é¢: 14,800ä¸‡å…ƒ (+4.2%)\n- é”€å”®é‡: 1,000ä¸‡ç›’ (+3.8%)\n- TOPäº§å“: é˜¿è«è¥¿æ—ã€å¸ƒæ´›èŠ¬\n- TOPåŒºåŸŸ: åä¸œã€åå—\n\næŠ¥å‘Šå·²ä¿å­˜,å¯åœ¨"æŠ¥è¡¨ä¸­å¿ƒ"æŸ¥çœ‹è¯¦ç»†ç‰ˆæœ¬ã€‚';
                    } else if (question.includes('ç«å“')) {
                        return 'å½“å‰ç«å“æ ¼å±€:\n- æœ¬å…¬å¸å¸‚åœºä»½é¢: 24.0% (â†‘2.1%)\n- ç«å“A: 26.0% (â†“1.5%)\n- ç«å“B: 21.0% (â†‘3.0%)\n\næˆ‘ä»¬åœ¨å¢é•¿ç‡æ–¹é¢é¢†å…ˆ,å»ºè®®ä¿æŒå½“å‰ç­–ç•¥å¹¶åŠ å¤§æ­å·ã€æ·±åœ³æŠ•å…¥ã€‚';
                    } else {
                        return 'æˆ‘ç†è§£æ‚¨çš„é—®é¢˜ã€‚åŸºäºå½“å‰æ•°æ®,æˆ‘å»ºè®®æ‚¨:\n\n1. æŸ¥çœ‹"å¸‚åœºæ´å¯Ÿ"ä»ªè¡¨ç›˜äº†è§£æ•´ä½“è¶‹åŠ¿\n2. ä½¿ç”¨"ç«å“åˆ†æ"æ¨¡å—å¯¹æ¯”ç«äº‰æ€åŠ¿\n3. æŸ¥çœ‹"é”€å”®é¢„æµ‹"äº†è§£æœªæ¥è¶‹åŠ¿\n\nå¦‚éœ€æ›´è¯¦ç»†çš„ç­”æ¡ˆ,è¯·æä¾›æ›´å¤šå…·ä½“é—®é¢˜ã€‚';
                    }
                }
            }
        }).mount('#app');
    </script>
</body>
</html>
